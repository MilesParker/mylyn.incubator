<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin>

    <extension point="org.eclipse.ui.preferencePages">
      <page 
         name="Sandbox"
         class="org.eclipse.mylar.internal.sandbox.MylarSandboxPreferencePage"
         id="org.eclipse.mylar.sandbox.ui.preferences"
         category="org.eclipse.mylar.ui.preferences">
         <keywordReference id="org.eclipse.mylar.java.keywords"/>
      </page> 
   </extension>
   
   <extension point="org.eclipse.mylar.tasks.ui.actions"> 
      <dynamicPopupMenu
            class="org.eclipse.mylar.internal.context.ui.TaskHighlighterMenuContributor"
            menuPath="context"/>
   </extension>
   
   <extension
   		point="org.eclipse.ui.keywords">
      <keyword
            label="mylar java"
            id="org.eclipse.mylar.java.keywords"/>
   </extension>

   <extension point="org.eclipse.ui.decorators">
      <decorator
            lightweight="true"
            label="Mylar Sandbox: Interest Level Decorator"
            class="org.eclipse.mylar.internal.sandbox.devtools.InterestDebuggingDecorator"
            state="false"
            id="org.eclipse.mylar.sandbox.ui.decorator.interest">
         <description>
			Appends interest level to nodes
		 </description>
         <enablement>
            <objectClass name="java.lang.Object"/>
         </enablement>
      </decorator>
   </extension>

  	<extension point = "org.eclipse.ui.popupMenus">
     <objectContribution
        id="org.eclipse.mylar.ui.instrospection"
        objectClass="java.lang.Object">
	    <action  
  		  	label="Mylar Sanbox: Introspect Object" 
	  		menubarPath="mylar" 
	  		id="org.eclipse.mylar.sandbox.actions.introspect" 
	  		class="org.eclipse.mylar.internal.sandbox.devtools.IntrospectObjectAction"
	  		enablesFor="1"/>
	 </objectContribution>
	</extension>
  
   <extension
         id="org.eclipse.mylar.web.repository"
         name="Generic web-based access (Advanced)"
         point="org.eclipse.mylar.tasks.ui.repositories">
      <connectorCore
            class="org.eclipse.mylar.internal.sandbox.web.WebRepositoryConnector"
            id="org.eclipse.mylar.web.tasklist.repositories"
            name="Generic web-based repository"
            type="web"/>
      <connectorUi
            brandingIcon="icons/obj16/repository-web.gif"
            class="org.eclipse.mylar.internal.sandbox.web.WebRepositoryUi"
            name="Generic web-based repsoitory UI"
            overlayIcon="icons/obj16/overlay-web.gif"/>
      <externalizer
            class="org.eclipse.mylar.internal.sandbox.web.WebTaskExternalizer" 
            id="org.eclipse.mylar.web.tasklist.externalizer"/>
   </extension>

   <extension
         point="org.eclipse.mylar.tasks.core.templates">
      <repository
           repositoryKind="web"
           label="Subclipse (IssueZilla)"
           urlRepository="http://subclipse.tigris.org/issues"
           urlTask="${serverUrl}/show_bug.cgi?id="
           urlNewTask="${serverUrl}/enter_bug.cgi?component=subclipse"
           urlTaskQuery="${serverUrl}/buglist.cgi?issue_status=NEW&amp;issue_status=STARTED&amp;issue_status=REOPENED&amp;order=Issue+Number">
         <attribute name="queryPattern" 
                    value="&lt;a href=&quot;show_bug.cgi\?id\=(.+?)&quot;&gt;.+?&lt;span class=&quot;summary&quot;&gt;(.+?)&lt;/span&gt;"/>        	
     </repository>
     <repository
           repositoryKind="web"
           label="GlasFish (IssueZilla)"
           urlRepository="https://glassfish.dev.java.net/issues"
           urlNewTask="${serverUrl}/enter_bug.cgi?issue_type=DEFECT"
           urlTask="${serverUrl}/show_bug.cgi?id="
           urlTaskQuery="${serverUrl}/buglist.cgi?component=glassfish&amp;issue_status=NEW&amp;issue_status=STARTED&amp;issue_status=REOPENED&amp;order=Issue+Number">
        <attribute name="queryPattern" 
                   value="&lt;a href=&quot;show_bug.cgi\?id\=(.+?)&quot;&gt;.+?&lt;span class=&quot;summary&quot;&gt;(.+?)&lt;/span&gt;"/>
     </repository>
     <repository
           repositoryKind="web"
           label="Spring Framework (Jira)"
           urlRepository="http://opensource.atlassian.com/projects/spring"
           urlNewTask="${serverUrl}/secure/CreateIssue!default.jspa?pid=${projectId}"
           urlTask="${serverUrl}/browse/SPR"
           urlTaskQuery="${serverUrl}/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid=${projectId}&amp;resolution=-1&amp;sorter/field=updated&amp;sorter/order=DESC">
        <attribute name="queryPattern" 
                   value="&lt;td class=&quot;nav summary&quot;&gt;\s+?&lt;a href=&quot;/projects/spring/browse/(.+?)&quot;.+?&gt;(.+?)&lt;/a&gt;"/>
        <attribute name="param_projectId" value="10000"/>
     </repository>           
     <repository
           repositoryKind="web"
           label="SpringIDE (Trac)"
           urlRepository="http://springide.org/project"
           urlTask="${serverUrl}/ticket/"
           urlNewTask="${serverUrl}/newticket"
           urlTaskQuery="${serverUrl}/query?status=new&amp;status=assigned&amp;status=reopened&amp;order=id">
        <attribute name="queryPattern" 
                   value="&lt;td class=&quot;summary&quot;&gt;&lt;a href=&quot;/project/ticket/(.+?)&quot; title=&quot;View ticket&quot;&gt;(.+?)&lt;/a&gt;&lt;/td&gt;"/>
     </repository>
     <repository
            repositoryKind="web"
            label="edgewall.org (Trac)"
            urlRepository="http://trac.edgewall.org"
            urlTask="${serverUrl}/ticket/"
            urlNewTask="${serverUrl}/newticket"
            urlTaskQuery="${serverUrl}/query?status=new&amp;status=assigned&amp;status=reopened&amp;order=id">
        <attribute name="queryPattern" 
                   value="&lt;td class=&quot;summary&quot;&gt;&lt;a href=&quot;/ticket/(.+?)&quot; title=&quot;View ticket&quot;&gt;(.+?)&lt;/a&gt;&lt;/td&gt;"/>
     </repository>             
     <repository
            repositoryKind="web"
            label="ASM (GForge)"
            urlRepository="http://forge.objectweb.org/tracker/index.php?group_id=23"
            urlTask="${serverUrl}&amp;func=detail&amp;atid=${categoryId}&amp;aid="
            urlNewTask="${serverUrl}&amp;func=add"
            urlTaskQuery="${serverUrl}&amp;atid=${categoryId}">
        <attribute name="param_projectId" value="23"/>
        <attribute name="param_categoryId" value="350023"/>
        <attribute name="queryPattern"
                   value="&lt;a class=&quot;tracker&quot; href=&quot;/tracker/index.php\?func=detail&amp;aid=(.+?)&amp;group_id=${projectId}&amp;atid=${categoryId}&quot;&gt;(.+?)&lt;/a&gt;&lt;/td&gt;"/>        	
     </repository>  
     <repository
            repositoryKind="web"
            label="Azureus (SourceForge)"
            urlRepository="http://sourceforge.net/tracker/?group_id=84122"
            urlTask="${serverUrl}&amp;func=detail&amp;atid=${categoryId}&amp;aid="
            urlNewTask="${serverUrl}&amp;func=add"
            urlTaskQuery="${serverUrl}&amp;atid=${categoryId}">
        <attribute name="param_projectId" value="84122"/>
        <attribute name="param_categoryId" value="575154"/>
        <attribute name="queryPattern" 
                   value="&lt;a href=&quot;/tracker/index.php\?func=detail&amp;amp;aid=(.+?)&amp;amp;group_id=${projectId}&amp;amp;atid=${categoryId}&quot;&gt;(.+?)&lt;/a&gt;"/>
     </repository>  
     <repository
            repositoryKind="web"
            label="phpbb.com (phpBB)"
            urlRepository="http://www.phpbb.com/phpBB"
            urlTask="${serverUrl}/viewtopic.php?t="
            urlNewTask="${serverUrl}/posting.php?mode=newtopic&amp;f=1"
            urlTaskQuery="${serverUrl}/viewforum.php?f=1">
        <attribute name="queryPattern" 
                   value="&lt;a href=&quot;viewtopic.php\?t=(\d+?)(?:&amp;.+?)?&quot; class=&quot;topictitle&quot;&gt;(.+?)&lt;/a&gt;"/>
     </repository>           
     <repository
            repositoryKind="web"
            label="Spring IDE Forum (vBulletin)"
            urlRepository="http://forum.springframework.org"
            urlTask="${serverUrl}/showthread.php?t="
            urlNewTask="${serverUrl}"
            urlTaskQuery="${serverUrl}/forumdisplay.php?f=${forumId}">
        <attribute name="param_forumId" value="32"/>
        <attribute name="queryPattern" 
                   value="&lt;a href=&quot;showthread.php\?.+?t=(\d+?)&quot; id=&quot;thread_title_\1&quot;&gt;(.+?)&lt;/a&gt;"/>
     </repository>            
     <repository
            repositoryKind="web"
            label="Eclipse Outliner (Google Code)"
            urlRepository="http://code.google.com/p/eclipse-outliner/issues"
            urlTask="${serverUrl}/detail?id="
            urlNewTask="${serverUrl}/entry"
            urlTaskQuery="${serverUrl}/list">
        <attribute name="queryPattern" 
                   value="&lt;td class=&quot;vt col_6&quot; .+?&lt;a href=&quot;detail\?id=([0-9]+).+?&quot;&gt;(.+?)&lt;/a&gt;.+?&lt;/td&gt;"/>
     </repository>
     <repository
            repositoryKind="web"
            label="Eclipse Plugin for Mantis (Mantis)"
            urlRepository="http://www.futureware.biz/mantis"
            urlTask="${serverUrl}/view.php?id="
            urlNewTask="${serverUrl}/bug_report_page.php"
            urlTaskQuery="${serverUrl}/view_all_set.php?f=3&amp;type=1&amp;page_number=1&amp;view_type=simple&amp;reporter_id[]=0&amp;user_monitor[]=0&amp;handler_id[]=0&amp;show_category[]=Eclipse+Plugin&amp;show_severity[]=0&amp;show_resolution[]=0&amp;show_profile[]=0&amp;show_status[]=0&amp;hide_status[]=80&amp;show_build[]=0&amp;show_version[]=0&amp;fixed_in_version[]=0&amp;show_priority[]=0&amp;per_page=50&amp;view_state=0&amp;sticky_issues=on&amp;highlight_changed=6&amp;relationship_type=-1&amp;relationship_bug=0&amp;sort_0=last_updated&amp;dir_0=DESC&amp;search=&amp;filter=Apply+Filter&amp;type=3&amp;source_query_id=-1">
        <attribute name="queryPattern" 
                   value="&lt;tr .+?&lt;a href=&quot;view.php\?id=(.+?)&quot;&gt;.+?&lt;td class=&quot;left&quot;&gt;(.+?)&lt;/td&gt;&lt;/tr&gt;"/>
     </repository>
   </extension>  
  
</plugin>


   <!--
   <extension point="org.eclipse.ui.viewActions"> 
   <viewContribution
         id="org.eclipse.mylar.monitor.reports.ui.switchTaskFolder"
         targetID="org.eclipse.mylar.tasks.ui.views.TaskListView">
      <action
            class="org.eclipse.mylar.internal.sandbox.share.SwitchTaskDataFolderAction"
            icon="icons/eview16/folder.gif"
            id="org.eclipse.mylar.monitor.reports.ui.actions.switchTask"
            label="Sandbox: Switch Task Data Folder..."
            menubarPath="context"
            style="push">
      </action>
   </viewContribution>
   </extension>
   -->
   

      <!--
        <provider 
         	markupProviderClass="org.eclipse.mylar.sandbox.viz.MylarJavaMarkupProvider" 
         	name="Mylar Provider" 
         	priority="9" 
         	description="Provider that shows java declarations that are part of a Mylar context for a task." 
         	emptyMessage="No active Mylar context to display" 
         	contentProviderClass="org.eclipse.mylar.sandbox.viz.MylarJavaContentProvider" 
         	id="mylarprovider" />
        -->
        
      
		<!-- This schema works for the older (1.1?) CVS version of the Visualiser from AJDT  
		<provider
		    class="org.eclipse.mylar.sandbox.viz.MylarJavaContentProvider"
		    markupclass="org.eclipse.mylar.sandbox.viz.MylarJavaMarkupProvider"
		    name="Mylar Java Provider"
		    title="Mylar Java Task Context"
		    priority="8"
		    description="Provider that shows java declarations that are part of a Mylar context for a task."
		    emptyMessage="No active Mylar context to display"
		    id="mylarprovider">
		</provider>
		 --> 
  
  <!--
   <extension point = "org.eclipse.ui.popupMenus">
     <objectContribution
        id="org.eclipse.mylar.interest"
        objectClass="org.eclipse.jdt.core.IJavaElement">
        <action id="org.eclipse.mylar.ui.actions.OpenRelatedElementsQuickView" 
              label="Related elements" 
	      	  menubarPath="mylar" 
              icon="icons/eview16/active-search.gif" 
              tooltip="Active Search quick view" 
              class="org.eclipse.mylar.ui.actions.OpenRelatedElementsQuickView" 
              enablesFor="1"/> 
	 </objectContribution>
  </extension>
  -->
